<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–°–∫–∞–∑–æ—á–Ω–∞—è —ç–∫—Å–∫—É—Ä—Å–∏—è —Ç–∞–ª–æ–Ω—á–∏–∫–∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Georgia', serif;
      background-color: #f0e7d8;
      background-image: url("https://sun7-24.userapi.com/s/v1/ig2/Gzp44pRO28dtSF2v3IcdEkCnO2KZJyQrB2chXuumGNwNVcjDykDgJ0MtrYpQM1aFgXMdLRwzRkGvNdGwsG50RTox.jpg?quality=95&as=32x32,48x48,72x72,108x108,160x160,240x240,360x360,480x480,540x540,640x640,720x720,1000x1000&from=bu&cs=1000x0");
      background-repeat: repeat;
      background-position: center top;
      background-attachment: fixed;
      padding: 40px 20px;
      min-height: 100vh;
    }

    .container {
      max-width: none;
      width: 100%;
      text-align: center;
    }

    #flipbook {
      width: 1200px;
      height: 800px;
      margin: 0 0 20px 0;
      overflow: hidden;
      display: inline-block;
    }
    #flipbook .page,
    #flipbook .turn-page {
      width: 600px !important;
      height: 800px !important;
    }

    #flipbook div {
      background-color: #fff;
    }

    .page-picture {
      display: block;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .cover-page {
      height: 100%;
    }

    .cover-page .page-picture {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .hidden-first-page {
      background: transparent !important;
      box-shadow: none !important;
    }
    .hidden-first-page * {
      display: none !important;
    }

    .controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 15px 0;
      max-width: 1200px;
      margin: 0 auto;
      gap: 10px;
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      background: #8b4513;
      color: #fff;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: background 0.3s;
      font-weight: bold;
    }

    button:hover { background: #a0522d; }
    button:disabled { background: #ccc; cursor: not-allowed; }

    .page-counter {
      color: #8b4513;
      font-size: 16px;
      font-weight: bold;
    }
  </style>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <!-- turn.js -->
  <script src="https://cdn.jsdelivr.net/gh/blasten/turn.js/turn.min.js"></script>
</head>
<body>

<div class="container">

  <div id="flipbook">
    <!-- 1. –ù–µ–≤–∏–¥–∏–º–∞—è —Ç–∏—Ç—É–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
    <div class="hidden-first-page"></div>

    <!-- 2‚Äì3. –î–≤–æ–π–Ω–∞—è –æ–±–ª–æ–∂–∫–∞ -->
    <div class="cover-page">
      <img src="img/low/2.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 2" class="page-picture">
    </div>
    <div class="cover-page">
      <img src="img/low/3.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 3" class="page-picture">
    </div>

    <!-- 4‚Äì5 -->
    <div>
      <img src="img/low/4.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 4" class="page-picture">
    </div>
    <div>
      <img src="img/high/5.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 5" class="page-picture">
    </div>

    <!-- 6‚Äì7 -->
    <div>
      <img src="img/low/6.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 6" class="page-picture">
    </div>
    <div>
      <img src="img/high/7.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 7" class="page-picture">
    </div>

    <!-- 8‚Äì9 -->
    <div>
      <img src="img/low/8.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 8" class="page-picture">
    </div>
    <div>
      <img src="img/high/9.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 9" class="page-picture">
    </div>

    <!-- 10‚Äì11 -->
    <div>
      <img src="img/low/10.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 10" class="page-picture">
    </div>
    <div>
      <img src="img/high/11.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 11" class="page-picture">
    </div>

    <!-- 12‚Äì13 -->
    <div>
      <img src="img/low/12.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 12" class="page-picture">
    </div>
    <div>
      <img src="img/high/13.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 13" class="page-picture">
    </div>

    <!-- 14‚Äì15 -->
    <div>
      <img src="img/low/14.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 14" class="page-picture">
    </div>
    <div>
      <img src="img/high/15.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 15" class="page-picture">
    </div>

    <!-- 16‚Äì17 -->
    <div>
      <img src="img/low/16.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 16" class="page-picture">
    </div>
    <div>
      <img src="img/high/17.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 17" class="page-picture">
    </div>

    <!-- 18‚Äì19 -->
    <div>
      <img src="img/low/18.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 18" class="page-picture">
    </div>
    <div>
      <img src="img/high/19.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 19" class="page-picture">
    </div>

    <!-- 20‚Äì21 -->
    <div>
      <img src="img/low/20.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 20" class="page-picture">
    </div>
    <div>
      <img src="img/high/21.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 21" class="page-picture">
    </div>

    <!-- 22‚Äì23 -->
    <div>
      <img src="img/low/22.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 22" class="page-picture">
    </div>
    <div>
      <img src="img/high/23.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 23" class="page-picture">
    </div>

    <!-- 24‚Äì25 -->
    <div>
      <img src="img/low/24.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 24" class="page-picture">
    </div>
    <div>
      <img src="img/high/25.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 25" class="page-picture">
    </div>

    <!-- 26‚Äì27 -->
    <div>
      <img src="img/low/26.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 26" class="page-picture">
    </div>
    <div>
      <img src="img/high/27.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 27" class="page-picture">
    </div>

    <!-- 28‚Äì29 -->
    <div>
      <img src="img/low/28.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 28" class="page-picture">
    </div>
    <div>
      <img src="img/high/29.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 29" class="page-picture">
    </div>

    <!-- 30‚Äì31 -->
    <div>
      <img src="img/low/30.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 30" class="page-picture">
    </div>
    <div>
      <img src="img/high/31.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 31" class="page-picture">
    </div>

    <!-- 32‚Äì33 -->
    <div>
      <img src="img/low/32.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 32" class="page-picture">
    </div>
    <div>
      <img src="img/high/33.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 33" class="page-picture">
    </div>

    <!-- 34‚Äì35 -->
    <div>
      <img src="img/low/34.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 34" class="page-picture">
    </div>
    <div>
      <img src="img/high/35.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 35" class="page-picture">
    </div>

    <!-- 36‚Äì37 -->
    <div>
      <img src="img/low/36.jpg" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 36" class="page-picture">
    </div>
    <div>
      <img src="img/high/37.png" alt="–°—Ç—Ä–∞–Ω–∏—Ü–∞ 37" class="page-picture">
    </div>
  </div>

  <div class="controls">
    <button id="prevBtn">‚Üê –ù–∞–∑–∞–¥</button>
    <span class="page-counter">
      <span id="currentPage">2</span> / <span id="totalPages">37</span>
    </span>
    <button id="speakBtn" title="–û–∑–≤—É—á–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É (S)">üîä</button>
    <button id="nextBtn">–í–ø–µ—Ä—ë–¥ ‚Üí</button>
  </div>
</div>

<script>
  $(function () {
    var $book = $('#flipbook');
    if ($book.length === 0) return;

    var audioMap = {
      2: 'https://getfile.dokpub.com/yandex/get/https://disk.yandex.ru/d/VxPc8XMfwdYhjw.mp3',
      4: 'https://getfile.dokpub.com/yandex/get/https://disk.yandex.ru/d/VxPc8XMfwdYhjw.mp3',
      6: 'https://getfile.dokpub.com/yandex/get/https://disk.yandex.ru/d/TROF3-xUfpGqzQ.mp3',
      8:  '',
      10: '',
      12: '',
      14: '',
      16: '',
      18: '',
      20: '',
      22: '',
      24: '',
      26: '',
      28: '',
      30: '',
      32: '',
      34: '',
      36: ''
    };

    $book.turn({
      width: 1200,
      autoCenter: true,
      elevation: 50,
      gradients: true,
      display: 'double',
      page: 2
    });

    $book.bind('turning', function (e, page) {
      if (page === 1) {
        e.preventDefault();
        $book.turn('page', 2);
      }
    });

    var totalPages = $book.turn('pages');
    $('#totalPages').text(totalPages);

    var currentAudio = null;

    function stopAudio() {
      if (currentAudio) {
        currentAudio.pause();
        currentAudio.currentTime = 0;
      }
      $('#speakBtn').text('üîä');
    }

    function updateCounter() {
      var page = $book.turn('page');
      var view = $book.turn('view', page);

      var leftPage  = Array.isArray(view) ? (view[0] || view[1]) : page;
      var rightPage = Array.isArray(view) ? (view[1] || view[0]) : page;

      $('#currentPage').text(page);
      $('#totalPages').text(totalPages);

      $('#prevBtn').prop('disabled', leftPage <= 2);

      var isLastSpread = (!rightPage || rightPage >= totalPages);
      $('#nextBtn').prop('disabled', isLastSpread);

      stopAudio();
    }

    $book.bind('turned', function () {
      updateCounter();
    });

    updateCounter();

    $('#prevBtn').on('click', function () {
      $book.turn('previous');
    });

    $('#nextBtn').on('click', function () {
      $book.turn('next');
    });

    $(document).on('keydown', function (e) {
      if (e.key === 'ArrowLeft')  $book.turn('previous');
      if (e.key === 'ArrowRight') $book.turn('next');
      if (e.key === 's' || e.key === 'S') speakCurrentPage();
    });

    function speakCurrentPage() {
      var pageNumber = $book.turn('page');
      var view = $book.turn('view', pageNumber);

      var realPage = Array.isArray(view) ? (view[0] != null ? view[0] : view[1]) : view;
      realPage = parseInt(realPage, 10);
      if (isNaN(realPage)) {
        alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –¥–ª—è –æ–∑–≤—É—á–∫–∏');
        return;
      }

      var audioUrl = audioMap[realPage];
      if (!audioUrl) {
        alert('–ê—É–¥–∏–æ –¥–ª—è —ç—Ç–æ–≥–æ —Ä–∞–∑–≤–æ—Ä–æ—Ç–∞ –Ω–µ –∑–∞–¥–∞–Ω–æ');
        return;
      }

      if (currentAudio && !currentAudio.paused) {
        stopAudio();
        return;
      }

      stopAudio();
      currentAudio = new Audio(audioUrl);

      currentAudio.onplay  = function () { $('#speakBtn').text('‚èπÔ∏è'); };
      currentAudio.onended = function () { $('#speakBtn').text('üîä'); };
      currentAudio.onerror = function () {
        alert('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∞—É–¥–∏–æ:\n' + audioUrl);
        $('#speakBtn'].text('üîä');
      };

      currentAudio.play().catch(function () {
        alert('–ê–≤—Ç–æ–ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏–µ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ. –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É –µ—â—ë —Ä–∞–∑.');
      });
    }

    $('#speakBtn').on('click', speakCurrentPage);
  });
</script>

</body>
</html>

